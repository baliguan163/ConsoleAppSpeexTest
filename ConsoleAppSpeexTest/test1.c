//
///*#include <speex/speex_callbacks.h>*/  
//#include <speex/speex.h> 
//#include <stdio.h> 
///*帧的大小在这个例程中是一个固定的值,但它并不是必须这样*/
//#define FRAME_SIZE 160 
//
//int main(int argc, char **argv)
//{
//	char *inFile;
//	FILE *fin;
//	short in[FRAME_SIZE];//160 
//	float input[FRAME_SIZE];//160 
//	char cbits[200];
//	int nbBytes;
//
//	/*保存编码的状态*/
//	void *state;
//	/*保存字节因此他们可以被speex常规读写*/
//	SpeexBits bits;
//	int i, tmp;
//	//新建一个新的编码状态在窄宽(narrowband)模式下 
//	state = speex_encoder_init(&speex_nb_mode);
//	//设置质量为8(15kbps) 
//	tmp = 8;
//	speex_encoder_ctl(state, SPEEX_SET_QUALITY, &tmp);
//
//	inFile = argv[1];
//	fprintf(stderr, "inFile:%s \n", inFile);
//	fin = fopen(inFile, "r");
//	//初始化结构使他们保存数据 
//	speex_bits_init(&bits);
//	fprintf(stderr, "  nbBits:%s \n", bits.nbBits);
//	fprintf(stderr, "buf_size:%s \n", bits.buf_size);
//	while (1)
//	{
//		//读入一帧16bits的声音 
//		fread(in, sizeof(short), FRAME_SIZE, fin);//160 
//		if (feof(fin))
//			break;
//
//		//把16bits的值转化为float,以便speex库可以在上面工作 
//		for (i = 0; i<FRAME_SIZE; i++)
//			input[i] = in[i];
//
//		//清空这个结构体里所有的字节,以便我们可以编码一个新的帧 
//		speex_bits_reset(&bits);
//		//对帧进行编码 
//		speex_encode(state, input, &bits);
//		//把bits拷贝到一个利用写出的char型数组 
//		nbBytes = speex_bits_write(&bits, cbits, 200);
//		//首先写出帧的大小,这是sampledec文件需要的一个值,但是你的应用程序中可能不一样 
//		fwrite(&nbBytes, sizeof(int), 1, stdout);
//		//写出压缩后的数组 
//		fwrite(cbits, 1, nbBytes, stdout);
//	}
//
//	//释放编码器状态量 
//	speex_encoder_destroy(state);
//	//释放bit_packing结构 
//	speex_bits_destroy(&bits);
//	fclose(fin);
//	getchar();
//	return 0;
//}